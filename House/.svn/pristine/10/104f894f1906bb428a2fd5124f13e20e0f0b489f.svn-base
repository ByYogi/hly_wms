<%@ Page Title="标签查询" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="BasicSpecManager.aspx.cs" Inherits="Cargo.Product.BasicSpecManager" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script src="../JS/Rotate/jQueryRotate.2.2.js" type="text/javascript"></script>
    <style type="text/css">
        .commTblStyle_8 th {
            border: 1px solid rgb(205, 205, 205);
            text-align: center;
            color: rgb(255, 255, 255);
            line-height: 28px;
            background-color: rgb(15, 114, 171);
        }

        .commTblStyle_8 tr.BlankRow td {
            line-height: 10px;
        }

        .commTblStyle_8 tr td {
            border: 1px solid rgb(205, 205, 205);
            text-align: center;
            line-height: 20px;
        }

            .commTblStyle_8 tr td.left {
                text-align: right;
                padding-right: 10px;
                font-weight: bold;
                white-space: nowrap;
                background-color: rgb(239, 239, 239);
            }

            .commTblStyle_8 tr td.right {
                text-align: left;
                padding-left: 10px;
            }

        .commTblStyle_8 .whiteback {
            background-color: rgb(255, 255, 255);
        }

        /*流程图样式*/
        .processBar {
            float: left;
            width: 100px;
            margin-top: 15px;
        }

            .processBar .bar {
                background: rgb(230, 224, 236);
                height: 3px;
                position: relative;
                width: 100px;
                margin-left: 10px;
            }

            .processBar .b-select {
                background: rgb(96, 72, 124);
            }

            .processBar .bar .c-step {
                position: absolute;
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: rgb(230, 224, 236);
                left: -12px;
                top: 50%;
                margin-top: -4px;
            }

            .processBar .bar .c-select {
                width: 10px;
                height: 10px;
                margin: -5px -1px;
                background: rgb(96, 72, 124);
            }

        .main-hide {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        .poetry {
            color: rgb(41, 41, 41);
            font-family: KaiTi_GB2312, KaiTi, STKaiti;
            font-size: 16px;
            background-color: transparent;
            font-weight: bold;
            font-style: normal;
            text-decoration: none;
        }

        button {
            width: 80px;
            line-height: 30px;
            font-size: 11px;
            color: rgb(116, 42, 149);
            text-align: center;
            border-radius: 6px;
            border: 1px solid #e2e2e2;
            cursor: pointer;
            background-color: #fff;
            outline: none;
        }

            button:hover {
                border: 1px solid rgb(179, 161, 200);
            }
    </style>
    <script src="../JS/easy/js/datagrid-groupview.js" type="text/javascript"></script>
    <%--<script src="../JS/Date/CheckActivX.js" type="text/javascript"></script>--%>
    <script src="../JS/Lodop/LodopFuncs.js" type="text/javascript"></script>
    <script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"></script>
    <script type="text/javascript">
        let UpClientDep = [];
        let dgSelIndex = -1;
        window.onload = function () {
            //$.ajaxSetup({ async: true });
            document.body.style.overflow = 'hidden';
            adjustment();
            document.body.style.overflow = 'auto';

            $.getJSON("../Client/clientApi.aspx?method=QueryAllUpClientDep", function (data) {
                UpClientDep = data;
            });
        }
        $(window).resize(function () {
            document.body.style.overflow = 'hidden';
            adjustment();
            document.body.style.overflow = 'auto';
        });
        function adjustment() {
            var height = Number($(window).height()) - Number($("div[name='SelectDiv1']").outerHeight(true)) - 405;
            //$('#dg').datagrid({ height: height });
        }
        //页面加载显示遮罩层防止用户看见未加载CSS的页面
        var pc;
        $.parser.onComplete = function () {
            if (pc) {
                clearTimeout(pc);
            }
            pc = setTimeout(closemask, 10);
        }
        //加载完成后关闭遮罩层
        function closemask() {
            $("#Loading").fadeOut("normal", function () {
                $(this).remove();
            });
        }

        $(document).ready(function () {
            showGrid();
            var columns = [];
            columns.push({
                title: '', field: '', checkbox: true, width: '30px', formatter: function (value) {
                    return "<span title='" + value + "'>" + value + "</span>";
                }
            });
            columns.push({ title: '区域大仓', field: 'HouseName', width: '125px' });
            columns.push({ title: '所在仓库', field: 'FirstAreaName', });
            columns.push({ title: '一级区域', field: 'ParentAreaName', });
            columns.push({ title: '所在区域', field: 'AreaName' });
            columns.push({ title: '货位代码', field: 'ContainerCode' });
            columns.push({ title: '数量', field: 'Numbers', ...numberColStyle });
            columns.push({ title: '在库数量', field: 'Piece', ...numberColStyle });
            columns.push({ title: '在库天数', field: 'InHouseDay', ...numberColStyle });
            columns.push({ title: '品牌', field: 'TypeName' });
            columns.push({ title: '产品ID', field: 'ProductID' });
            columns.push({ title: '产品编码', field: 'ProductCode' });
            columns.push({ title: '产品名称', field: 'ProductName' });
            columns.push({ title: '货品代码', field: 'GoodsCode' });
            columns.push({ title: '型号', field: 'Model' });
            columns.push({ title: '规格', field: 'Specs' });
            columns.push({ title: '花纹', field: 'Figure' });
            columns.push({ title: '载速', field: 'LoadIndex' });
            columns.push({ title: '批次', field: 'Batch' });
            columns.push({ title: '供应商', field: 'Supplier' });
            columns.push({
                title: '归属部门', field: 'BelongDepart', formatter: function (value) {
                    return "<span title='" + GetUpClientDepName(value) + "'>" + GetUpClientDepName(value) + "</span>";
                }
            });
            columns.push({ title: '入库时间', field: 'InHouseTime', formatter: DateTimeFormatter });

            $('#dg').datagrid({
                width: '100%',
                height: '100%',
                title: '在库数量', //标题内容
                loadMsg: '数据加载中请稍候...',

                rownumbers: true,
                autoRowHeight: false, //行高是否自动
                collapsible: false, //是否可折叠
                pagination: false, //分页是否显示
                pageSize: 200,
                //pageSize: Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), //每页多少条
                //pageList: [Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28) * 2],
                fitColumns: true, //设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动
                singleSelect: true, //设置为 true，则只允许选中一行。
                checkOnSelect: true, //如果设置为 true，当用户点击某一行时，则会选中/取消选中复选框。如果设置为 false 时，只有当用户点击了复选框时，才会选中/取消选中复选框
                idField: 'ProductID `',
                url: null,
                toolbar: '#toolbar',
                columns: [columns],

                onLoadSuccess: function (data) { },
                onClickRow: function (index, row) {
                    console.log("preSelectedRow", dgSelIndex, index)

                    if (dgSelIndex === index) return;
                    dgSelIndex = index;

                    //选择在库数量直接获取标签数据
                    const tbData = $('#dg').datagrid('getData').rows;
                    const curRowData = tbData[index];
                    gridOpts = $('#dgTag').datagrid('options');
                    gridOpts.url = 'productApi.aspx?method=QueryTagByProductID&ProductID=' + curRowData.ProductID;
                    $('#dgTag').datagrid('load');
                },
            });
            var datenow = new Date();
            $('#StartDate').datebox('setValue', getNowFormatDate(datenow));
            $('#EndDate').datebox('setValue', getNowFormatDate(datenow));
            $('#StartDate').datebox('textbox').bind('focus', function () { $('#StartDate').datebox('showPanel'); });
            $('#EndDate').datebox('textbox').bind('focus', function () { $('#EndDate').datebox('showPanel'); });
            //采购部门
            $('#APurDepartID').combobox({
                url: '../Client/clientApi.aspx?method=QueryCargoClientSupplier&ClientType=4&UpClientID=1', valueField: 'ClientNum', textField: 'ClientName',
            });
            $('#APurchaseType').combobox('textbox').bind('focus', function () { $('#APurchaseType').combobox('showPanel'); });
            $('#AApplyStatus').combobox('textbox').bind('focus', function () { $('#AApplyStatus').combobox('showPanel'); });
            $('#APurDepartID').combobox('textbox').bind('focus', function () { $('#APurDepartID').combobox('showPanel'); });
            $('#APurchaseInStoreType').combobox('textbox').bind('focus', function () { $('#APurchaseInStoreType').combobox('showPanel'); });
        })

       
        //查询
        function dosearch() {
            if ($('#dg').datagrid('getData').total > 0)
                $('#dg').datagrid('clearSelections');
            var gridOpts = $('#dg').datagrid('options');
            gridOpts.url = 'productApi.aspx?method=QueryProductTag';
            $('#dg').datagrid('load', {
                ProductID: $('#ProductID').val(),
                TagCode: $("#TagCode").val(),
                TyreCode: $("#TyreCode").val(),
            });

            gridOpts = $('#dgTag').datagrid('options');
            gridOpts.url = 'productApi.aspx?method=QueryTagByProductID&ProductID=' + $('#ProductID').val();
            $('#dgTag').datagrid('load', {
                ProductID: $('#ProductID').val(),
                TagCode: $("#TagCode").val(),
                TyreCode: $("#TyreCode").val(),
            });

            if ($('#dgSave').datagrid('getData').total > 0)
                $('#dgSave').datagrid('clearSelections');
            gridOpts = $('#dgSave').datagrid('options');
            gridOpts.url = 'productApi.aspx?method=QueryProductMoveOrder';
            $('#dgSave').datagrid('load', {
                ProductID: $('#ProductID').val(),
                TagCode: $("#TagCode").val(),
                TyreCode: $("#TyreCode").val(),
            });

            if ($('#outDg').datagrid('getData').total > 0)
                $('#outDg').datagrid('clearSelections');
            gridOpts = $('#outDg').datagrid('options');
            gridOpts.url = 'productApi.aspx?method=QueryProductSalesOrder';
            $('#outDg').datagrid('load', {
                ProductID: $('#ProductID').val(),
                TagCode: $("#TagCode").val(),
                TyreCode: $("#TyreCode").val(),
            });
        }
        //查询产品标签数据列表 
        function queryTag() {
            var row = $('#dg').datagrid('getSelected');
            if (row == null || row == "") {
                $.messager.alert('<%= Cargo.Common.GetSystemNameAndVersion()%>', '请选择要查询标签的产品！', 'warning');
                return;
             }
              if (row) {
                  //$('#productTag').dialog('open').dialog('setTitle', '查询产品：' + row.Specs + '标签列表');
                  //showTagGrid(row.HouseID);
                  $('#dgTag').datagrid('clearSelections');
                  var gridOpts = $('#dgTag').datagrid('options');
                  gridOpts.url = 'productApi.aspx?method=QueryTagByProductID&ProductID=' + row.ProductID + '&ContainerID=' + row.ContainerID;
                  $('#dgTag').datagrid('load');
                 <%-- $('#btnUnOutCargo').hide();
                  var isAdmin = "<%=UserInfor.IsAdmin%>";
                  if (isAdmin == "1") {
                      $('#btnUnOutCargo').show();
                  }--%>
              }
        }


        //根据公司部门ID获取部门名称
        function GetUpClientDepName(value) {
            var name = '';
            if (value != "" && UpClientDep?.length) {
                for (var i = 0; i < UpClientDep.length; i++) {
                    if (UpClientDep[i].ID == value) {
                        name = UpClientDep[i].DepName;
                        break;
                    }
                }
            }
            return name;
        };
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <%--此div用于在界面未完全加载样式前显示内容--%>
    <div id='Loading' style="position: absolute; z-index: 1000; top: 0px; left: 0px; width: 100%; height: 100%; background: white; text-align: center; padding: 5px 10px; display: table;">
        <div style="display: table-cell; vertical-align: middle">
            <h1><font size="9">页面加载中……</font></h1>
        </div>
    </div>
    <div id="saPanel" name="SelectDiv1" class="easyui-panel" title="" data-options="iconCls:'icon-search'" style="width: 100%">
        <table>
            <tr>
                <td style="text-align: right;">产品ID:</td>
                <td>
                    <input id="ProductID" class="easyui-textbox" data-options="prompt:'请输入产品ID'" style="width: 100px" /></td>

                <td style="text-align: right;">标签编码:</td>
                <td>
                    <input id="TagCode" class="easyui-textbox" data-options="prompt:'请输入标签编码'" style="width: 100px" /></td>

                <td style="text-align: right;">轮胎编码:</td>
                <td>
                    <input id="TyreCode" class="easyui-textbox" data-options="prompt:'请输入轮胎编码'" style="width: 100px" /></td>

            </tr>
        </table>
    </div>
    <table style="width: 100%">
        <tr>
            <td style="width: 50%; height: 400px; margin: 0px; padding: 0px;">
                <table id="dg" class="easyui-datagrid"></table>
            </td>
            <td style="width: 50%; height: 400px; margin: 0px; padding: 0px;">    
                <table id="dgTag" class="easyui-datagrid"></table>
            </td>
        </tr>
        <tr>
            <td style="width: 50%; height: 400px; margin: 0px; padding: 0px;">
                <table id="dgSave" class="easyui-datagrid">
                </table>
            </td>
            <td style="width: 50%; height: 400px; margin: 0px; padding: 0px;">
                <table id="outDg" class="easyui-datagrid">
                </table>
            </td>
        </tr>
    </table>
    <div id="toolbar">
        <a href="#" class="easyui-linkbutton" iconcls="icon-search" plain="false" onclick="dosearch()">&nbsp;查&nbsp;询&nbsp;</a>&nbsp;&nbsp;
        <%--<a href="#" id="btnTag" class="easyui-linkbutton" iconcls="icon-tag_blue" plain="false" onclick="queryTag()">&nbsp;查看标签&nbsp;</a>--%>&nbsp;&nbsp;
   <%--     <a href="#" id="btnDel" class="easyui-linkbutton" iconcls="icon-cut" plain="false" onclick="DelItem()">&nbsp;删&nbsp;除&nbsp;</a>&nbsp;&nbsp;--%>
    </div>


     <!--Begin 查询产品标签列表-->
 <%--<div id="productTag" class="easyui-dialog" style="width: 1200px; height: 520px; padding: 0px"
     closed="true" buttons="#productTag-buttons">
     <table id="dgTag" class="easyui-datagrid">
     </table>
     <div id="productTag-buttons">
         <a href="#" class="easyui-linkbutton" iconcls="icon-cancel" onclick="javascript:$('#productTag').dialog('close')">&nbsp;关&nbsp;闭&nbsp;</a>
     </div>
 </div>--%>
 <!--End 查询产品标签列表-->

    <object id="LODOP_OB" title="dd" classid="clsid:2105C259-1E0C-4534-8141-A753534CB4CA"
        width="0px" height="0px">
        <embed id="LODOP_EM" type="application/x-print-lodop" width="0px" height="0px"></embed>
    </object>
    <script type="text/javascript">
        //数字列样式
        const numberColStyle = {
            align: 'right', styler: function (val, row, index) { return "color:#12bb1f;font-weight:bold;" }, formatter: function (value) {
                return "<span title='" + value + "'>" + value + "</span>";
            }
        };

        //弹出定时关闭的消息框
        function alert_autoClose(title, msg, icon) {
            var interval;
            var time = 500;
            var x = 2;  //只接受整数
            $.messager.alert(title, msg, icon, function () { });
            interval = setInterval(fun, time);
            function fun() {
                --x;
                if (x == 0) {
                    clearInterval(interval);
                    $(".messager-body").window('close');
                }
            };
        }
        function DateTimeFormatter(val) {
            if (val == null || val == '') {
                return ''
            }
            var dt = parseToDate(getDate(val));
            if (dt.format("yyyy-MM-dd") == "1901-01-01") {
                return ""
            }
            if (dt.format("yyyy-MM-dd") == "1900-01-01") {
                return ""
            }
            if (dt.format("yyyy-MM-dd") == "0001-01-01") {
                return ""
            }
            if (dt.format("yyyy-MM-dd") == "1-01-01") {
                return ""
            }
            return dt.format("yyyy-MM-dd hh:mm:ss")
        }

        //标签数据列表
        function showTagGrid(houseID) {
            var columns = [];
            if (houseID == "47") {
                //columns.push({ title: '', field: 'ProductID', checkbox: true, width: '30px' });
                columns.push({ title: '产品名称', field: 'ProductName', width: '80px' });
                columns.push({ title: '规格', field: 'Specs', width: '80px' });
                columns.push({ title: '长和编码', field: 'Figure', width: '80px' });
                columns.push({ title: '标签编码', field: 'TagCode', width: '90px' });
                columns.push({ title: '货位代码', field: 'ContainerCode', width: '80px' });
                columns.push({
                    title: '入库状态', field: 'InCargoStatus', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "未入库"; } else if (val == "1") { return "已入库"; } else { return "未入库"; } }
                });
                columns.push({
                    title: '入库类型', field: 'InCargoType', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "进货扫描入库"; } else if (val == "1") { return "退货入库"; } else if (val == "2") { return "删除订单入库"; } else if (val == "3") { return "拉下订单入库"; } else if (val == "4") { return "复盘入库"; } else { return "进货扫描入库"; } }
                });
                columns.push({ title: '入库时间', field: 'InCargoTime', width: '120px', formatter: DateTimeFormatter });
                columns.push({ title: '入库操作人', field: 'InCargoOperID', width: '60px' });
                columns.push({
                    title: '出库状态', field: 'OutCargoStatus', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "未出库"; } else if (val == "1") { return "已出库"; } else { return "未出库"; } }
                });
                columns.push({ title: '出库时间', field: 'OutCargoTime', width: '120px', formatter: DateTimeFormatter });
                columns.push({ title: '出库操作人', field: 'OutCargoOperID', width: '60px' });
                columns.push({ title: '出库订单号', field: 'OrderNo', width: '80px' });
                columns.push({ title: '轮胎编码', field: 'TyreCode', width: '100px' });
            } else {
                //columns.push({ title: '', field: 'ProductID', checkbox: true, width: '30px' });
                //columns.push({ title: '产品名称', field: 'ProductName', width: '80px' });
                columns.push({ title: '规格', field: 'Specs', width: '80px' });
                columns.push({ title: '花纹', field: 'Figure', width: '85px' });
                columns.push({ title: '标签编码', field: 'TagCode', width: '95px' });
                columns.push({ title: '轮胎编码', field: 'TyreCode', width: '95px' });
                columns.push({ title: '货位代码', field: 'ContainerCode', width: '80px' });
                columns.push({
                    title: '入库状态', field: 'InCargoStatus', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "未入库"; } else if (val == "1") { return "已入库"; } else { return "未入库"; } }
                });
                columns.push({
                    title: '入库类型', field: 'InCargoType', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "进货扫描入库"; } else if (val == "1") { return "退货入库"; } else if (val == "2") { return "删除订单入库"; } else if (val == "3") { return "拉下订单入库"; } else if (val == "4") { return "复盘入库"; } else { return "进货扫描入库"; } }
                });
                columns.push({ title: '入库时间', field: 'InCargoTime', width: '120px', formatter: DateTimeFormatter });
                columns.push({ title: '入库操作人', field: 'InCargoOperID', width: '60px' });
                columns.push({
                    title: '出库状态', field: 'OutCargoStatus', width: '60px',
                    formatter: function (val, row, index) { if (val == "0") { return "未出库"; } else if (val == "1") { return "已出库"; } else { return "未出库"; } }
                });
                columns.push({ title: '出库时间', field: 'OutCargoTime', width: '120px', formatter: DateTimeFormatter });
                columns.push({ title: '出库操作人', field: 'OutCargoOperID', width: '60px' });
                columns.push({ title: '出库订单号', field: 'OrderNo', width: '80px' });
            }
            $('#dgTag').datagrid({
                width: '100%',
                height: '100%',
                title: '产品标签', //标题内容
                rownumbers: true,
                loadMsg: '数据加载中请稍候...',
                autoRowHeight: false, //行高是否自动
                collapsible: false, //是否可折叠
                pagination: false, //分页是否显示fitColumns: true, //设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动
                singleSelect: true, //设置为 true，则只允许选中一行。
                checkOnSelect: true, //如果设置为 true，当用户点击某一行时，则会选中/取消选中复选框。如果设置为 false 时，只有当用户点击了复选框时，才会选中/取消选中复选框
                idField: 'TagCode',
                rownumbers: true,
                url: null,
                columns: [columns],

                onClickRow: function (index, row) {
                    $('#dgTag').datagrid('clearSelections');
                    $('#dgTag').datagrid('selectRow', index);
                }
            });
        }

        //显示列表
        function showGrid() {
        //标签数据列表
            showTagGrid();
            var columns = [];
            //产品ID、货位代码 、移库单号、原仓库、原区域 、目标仓库、移库数量、已入数量、移库状态、品牌 、货品代码、产品编码、开单人、操作时间
            columns.push({ title: '产品ID', field: 'ProductID', });
            columns.push({ title: '货位代码', field: 'ContainerCode', });
            columns.push({ title: '移库单号', field: 'MoveNo', });
            columns.push({ title: '原仓库', field: 'HouseName' });
            columns.push({ title: '原区域', field: 'FirstAreaName', });
            columns.push({ title: '目标仓库', field: 'NewHouseName', });
            columns.push({ title: '总移库数量', field: 'MoveNum', ...numberColStyle });
            columns.push({ title: '移库数量', field: 'Piece', ...numberColStyle });
            columns.push({ title: '已入数量', field: 'NewPiece', ...numberColStyle });
            columns.push({
                title: '移库状态', field: 'MoveStatus', formatter: function (val, row, index) {
                    if (val == "0") { return "已开单" }
                    else if (val == "3") { return "<span title='移库中'>移库中</span>";  }
                    else if (val == "1") { return "<span title='全扫描'>全扫描</span>"; }
                    else if (val == "2") { return "<span title='已完成'>已完成</span>"; }
                    else if (val == "4") { return "<span title='入库中'>入库中</span>"; }
                    else return ""
                }
            });
            columns.push({ title: '品牌', field: 'TypeName', });
            columns.push({ title: '货品代码', field: 'GoodsCode', });
            columns.push({ title: '产品编码', field: 'ProductCode', });
            columns.push({ title: '开单人', field: 'OPID', });
            columns.push({ title: '操作时间', field: 'OP_DATE', formatter: DateFormatter });

            $('#dgSave').datagrid({
                width: '100%',
                height: '100%',
                title: '移库数据', //标题内容
                rownumbers: true,
                loadMsg: '数据加载中请稍候...',
                autoRowHeight: false, //行高是否自动
                collapsible: false, //是否可折叠
                pagination: false, //分页是否显示
                //pageSize: Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), //每页多少条
                //pageList: [Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28) * 2],
                fitColumns: true, //设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动
                singleSelect: true, //设置为 true，则只允许选中一行。
                checkOnSelect: true, //如果设置为 true，当用户点击某一行时，则会选中/取消选中复选框。如果设置为 false 时，只有当用户点击了复选框时，才会选中/取消选中复选框
                idField: 'FPID',
                rownumbers: true,
                url: null,

                columns: [columns],
                onClickRow: function (index, row) {

                },
                rowStyler: function (index, row) { }
            });
            //出库仓库  、出库区域 、订单号 、产品ID、出库数量、货位代码、品牌、货品代码、产品编码、归属部门、订单状态 、送货方式 、订单类型 、下单方式、审核状态 、结算状态 、开单员、开单时间
            var colu = [];
            //colu.push({ title: '', field: 'GoodsID', checkbox: true });
            colu.push({ title: '出库仓库', field: 'HouseName', });
            //colu.push({ title: '出库区域', field: 'AreaName', });
            colu.push({ title: '订单号', field: 'OrderNo', });
            colu.push({ title: '产品ID', field: 'ProductID', });
            colu.push({ title: '出库数量', field: 'Piece', ...numberColStyle });
            colu.push({ title: '货位代码', field: 'ContainerCode', });
            colu.push({ title: '品牌', field: 'TypeName', });
            colu.push({ title: '货品代码', field: 'GoodsCode', });
            colu.push({ title: '产品编码', field: 'ProductCode', });
            //colu.push({
            //    title: '归属部门', field: 'BelongDepart', formatter: function (val, row, index) {
            //        return "<span title='" + GetUpClientDepName(val) + "'>" + GetUpClientDepName(val) + "</span>";
            //    } });
            colu.push({
                title: '订单状态', field: 'AwbStatus',
                formatter: function (val, row, index) {
                    if (val == "0") { return "<span title='已下单'>已下单</span>"; }
                    else if (val == "1") { return "<span title='正在备货'>正在备货</span>"; }
                    else if (val == "2") { return "<span title='已出库'>已出库</span>"; }
                    else if (val == "3") { return "<span title='已装车'>已装车</span>"; }
                    else if (val == "4") { return "<span title='已到达'>已到达</span>"; }
                    else if (val == "5") { return "<span title='已签收'>已签收</span>"; }
                    else if (val == "6") { return "<span title='已拣货'>已拣货</span>"; }
                    else if (val == "7") { return "<span title='配送'>配送</span>"; }
                    else if (val == "8") { return "<span title='到货确认'>到货确认</span>"; }
                    else if (val == "9") { return "<span title='已接单提货'>已接单提货</span>"; }
                    else { return ""; }
                }
            });
            colu.push({
                title: '订单类型', field: 'OrderModel', formatter: function (val, row, index) {
                    if (val == "0") { return "<span title='客户单'>客户单</span>"; }
                    else if (val == "1") { return "<span title='退货单'>退货单</span>"; }
                    else { return ""; }
                }
            });
            //colu.push({
            //    title: '送货方式', field: 'DeliveryType', formatter: function (val, row, index) {
            //        if (val == "0") { return "<span title='送货'>送货</span>"; }
            //        else if (val == "1") { return "<span title='自提'>自提</span>"; }
            //        else if (val == "2") { return "<span title='快递'>快递</span>"; }
            //        else { return ""; }
            //    } });
            //colu.push({
            //    title: '订单类型', field: 'ThrowGood', formatter: function (val, row, index) {
            //        if (val == "0") { return "<span title='客户单'>客户单</span>"; }
            //        else if (val == "1") { return "<span title='抛货单'>抛货单</span>"; }
            //        else if (val == "2") { return "<span title='调货单'>调货单</span>"; }
            //        else if (val == "3") { return "<span title='代发单'>代发单</span>"; }
            //        else if (val == "4") { return "<span title='会议单'>会议单</span>"; }
            //        else if (val == "5") { return "<span title='长和订单'>长和订单</span>"; }
            //        else if (val == "6") { return "<span title='商贸订单'>商贸订单</span>"; }
            //        else if (val == "7") { return "<span title='其它订单'>其它订单</span>"; }
            //        else if (val == "8") { return "<span title='理赔单'>理赔单</span>"; }
            //        else if (val == "9") { return "<span title='移库单'>移库单</span>"; }
            //        else if (val == "10") { return "<span title='祺航订单'>祺航订单</span>"; }
            //        else if (val == "11") { return "<span title='展示单'>展示单</span>"; }
            //        else if (val == "12") { return "<span title='OES客户单'>OES客户单</span>"; }
            //        else if (val == "13") { return "<span title='自有零售店单'>自有零售店单</span>"; }
            //        else if (val == "14") { return "<span title='报量单'>报量单</span>"; }
            //        else if (val == "15") { return "<span title='速配单'>速配单</span>"; }
            //        else if (val == "16") { return "<span title='促销单'>促销单</span>"; }
            //        else if (val == "17") { return "<span title='急送单'>急送单</span>"; }
            //        else if (val == "18") { return "<span title='异地单'>异地单</span>"; }
            //        else if (val == "19") { return "<span title='来货单'>来货单</span>"; }
            //        else if (val == "20") { return "<span title='电商单'>电商单</span>"; }
            //        else if (val == "21") { return "<span title='订货单'>订货单</span>"; }
            //        else if (val == "22") { return "<span title='即日达'>即日达</span>"; }
            //        else if (val == "23") { return "<span title='次日达'>次日达</span>"; }
            //        else if (val == "24") { return "<span title='渠道订单'>渠道订单</span>"; }
            //        else if (val == "25") { return "<span title='退仓单'>退仓单</span>"; }
            //        else { return ""; }
            //    } });
            //colu.push({
            //    title: '下单方式', field: 'OrderType', formatter: function (val, row, index) {
            //        if (val == "0") { return "<span title='电脑下单'>电脑下单</span>"; }
            //        else if (val == "1") { return "<span title='微信企业号下单'>微信企业号下单</span>"; }
            //        else if (val == "2") { return "<span title='微信商城下单'>微信商城下单</span>"; }
            //        else if (val == "3") { return "<span title='APP商城下单'>APP商城下单</span>"; }
            //        else if (val == "4") { return "<span title='微信小程序下单'>微信小程序下单</span>"; }
            //        else { return ""; }
            //    } });
            //colu.push({
            //    title: '审核状态', field: 'FinanceSecondCheck', formatter: function (val, row, index) {
            //        if (val == "0") { return "<span title='未审'>未审</span>"; }
            //        else if (val == "1") { return "<span title='已审'>已审</span>"; }
            //        else { return ""; }
            //    } });
            //colu.push({
            //    title: '结算状态', field: 'CheckStatus', formatter: function (val, row, index) {
            //        if (val == "0") { return "<span title='未结算'>未结算</span>"; }
            //        else if (val == "1") { return "<span title='已结清'>已结清</span>"; }
            //        else if (val == "2") { return "<span title='未结清'>未结清</span>"; }
            //        else { return ""; }
            //    }
            //});
            colu.push({ title: '开单员', field: 'CreateAwb',});
            colu.push({ title: '开单时间', field: 'CreateDate', formatter: DateFormatter });


            $('#outDg').datagrid({
                width: '100%',
                height: '100%',
                title: '订单数据', //标题内容
                rownumbers: true,
                loadMsg: '数据加载中请稍候...',
                autoRowHeight: false, //行高是否自动
                collapsible: false, //是否可折叠
                pagination: false, //分页是否显示
                fitColumns: true, //设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动
                singleSelect: false, //设置为 true，则只允许选中一行。
                checkOnSelect: true, //如果设置为 true，当用户点击某一行时，则会选中/取消选中复选框。如果设置为 false 时，只有当用户点击了复选框时，才会选中/取消选中复选框
                idField: 'GoodsID',
                rownumbers: true,
                url: null,
                //pageSize: Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), //每页多少条
                //pageList: [Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28), Math.floor((Number($(window).height()) - $("div[name='SelectDiv1']").outerHeight(true) - 58) / 28) * 2],
                columns: [colu],
                onClickRow: function (index, row) {
                },
                onDblClickRow: function (index, row) { },
                rowStyler: function (index, row) {
                    //未出库
                    if (row.AwbStatus == "" || row.AwbStatus == null || row.AwbStatus == "0" || row.AwbStatus == "1") { return "background-color:#FFCC66"; };

                },
            });
        }
    </script>
</asp:Content>
